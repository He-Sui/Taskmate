<template>
  <div id="left-col">
    <svg t="1682074951908" class="icon" viewBox="0 0 1024 1024" version="1.1"
         xmlns="http://www.w3.org/2000/svg" p-id="1245" width="40" height="40"
         style="position: absolute; left: 5%; top: 3%" @click="goMain()">
      <path d="M512 0L51.2 358.4v665.6h358.4v-358.4h204.8v358.4h358.4V358.4l-460.8-358.4z" fill="#333333" p-id="1246"></path>
    </svg>
    <svg t="1682075254103" class="icon" viewBox="0 0 1024 1024" version="1.1"
         xmlns="http://www.w3.org/2000/svg" p-id="1384" width="60" height="60"
         style="position: absolute; left: 20%; top: 1.5%">
      <path d="M467.2 512l272-272-92.8-89.6-272 272L284.8 512l89.6 92.8 272 268.8 92.8-89.6z" p-id="1385"></path>
    </svg>
    <svg t="1682075382590" class="icon" viewBox="0 0 1024 1024" version="1.1"
         xmlns="http://www.w3.org/2000/svg" p-id="1519" width="60" height="60"
         style="position: absolute; right: 0; top: 1.5%">
      <path d="M170.666667 213.333333h682.666666v85.333334H170.666667V213.333333z m0 512h682.666666v85.333334H170.666667v-85.333334z m0-256h682.666666v85.333334H170.666667v-85.333334z" fill="#444444" p-id="1520"></path>
    </svg>
    <div id="first-row">
      <span style="font-size: 150%; position: absolute; left: 0; top: 10px">CS 1234</span>
      <svg t="1682075492593" class="icon" viewBox="0 0 1024 1024" version="1.1"
           xmlns="http://www.w3.org/2000/svg" p-id="1658" width="40" height="40"
           style="position: absolute; right: 0">
        <path d="M534.4 553.6L262.4 284.8l-89.6 89.6 272 272 89.6 89.6 89.6-89.6 272-272-89.6-89.6z" p-id="1659"></path>
      </svg>
    </div>
    <ul style="position: absolute; left: 0; top: 120px; width: 230px; list-style: none; padding-left: 5%; line-height: 2">
      <li>
        <a>
          <span style="font-size: 200%; margin-right: 15px">assignment1</span>
          <svg t="1682075661406" class="icon" viewBox="0 0 1024 1024" version="1.1"
               xmlns="http://www.w3.org/2000/svg" p-id="1793" width="30" height="30">
            <path d="M817.728 198.72l111.744 114.56-545.216 532.128-285.92-273.024 110.528-115.712 174.176 166.336z" fill="#000000" p-id="1794"></path>
          </svg>
        </a>
      </li>
      <li>
        <a>
          <span style="font-size: 200%; margin-right: 15px">assignment2</span>
          <svg t="1682075886540" class="icon" viewBox="0 0 1024 1024" version="1.1"
               xmlns="http://www.w3.org/2000/svg" p-id="1932" width="30" height="30">
            <path d="M242.48 185.248C179.52 153.76 128 185.6 128 256v512c0 70.4 51.52 102.24 114.48 70.752l539.024-269.52c62.96-31.488 62.96-83.008 0-114.48L242.48 185.248z" fill="#231815" p-id="1933"></path>
          </svg>
        </a>
      </li>
      <li>
        <a>
          <span style="font-size: 200%; margin-right: 15px">assignment3</span>
          <svg t="1682075661406" class="icon" viewBox="0 0 1024 1024" version="1.1"
               xmlns="http://www.w3.org/2000/svg" p-id="1793" width="30" height="30">
            <path d="M817.728 198.72l111.744 114.56-545.216 532.128-285.92-273.024 110.528-115.712 174.176 166.336z" fill="#000000" p-id="1794"></path>
          </svg>
        </a>
      </li>
    </ul>
    <span style="font-size: 200%; position: absolute; left: 0; top: 320px; padding-left: 5%">...</span>
    <div id="second-row">
      <span style="font-size: 150%; position: absolute; left: 0; top: 10px">CS 6789</span>
      <svg t="1682075254103" class="icon" viewBox="0 0 1024 1024" version="1.1"
           xmlns="http://www.w3.org/2000/svg" p-id="1384" width="40" height="40"
           style="position: absolute; right: 0">
        <path d="M467.2 512l272-272-92.8-89.6-272 272L284.8 512l89.6 92.8 272 268.8 92.8-89.6z" p-id="1385"></path>
      </svg>
    </div>

  </div>
  <div id="right-col">
    <span style="font-size: 180%; position: absolute; left: 30px; top: 35px;">Assignment2(st_time, ed_time, delay_time)...</span>
    <svg t="1682077213432" class="icon" viewBox="0 0 1024 1024" version="1.1"
         xmlns="http://www.w3.org/2000/svg" p-id="2206" width="40" height="40"
         style="position: absolute; right: 250px; top: 100px">
      <path d="M877.49 381.468H668.638V68.191H355.36v313.277H146.51l365.489 365.49 365.49-365.49zM146.51 851.383v104.425h730.98V851.383H146.51z" p-id="2207"></path>
    </svg>
    <svg t="1682077348842" class="icon" viewBox="0 0 1024 1024" version="1.1"
         xmlns="http://www.w3.org/2000/svg" p-id="2345" width="40" height="40"
         style="position: absolute; right: 180px; top: 95px">
      <path d="M740.154386 1022.203509H283.845614C127.550877 1022.203509 1.796491 896.449123 1.796491 740.154386V285.642105C1.796491 129.347368 127.550877 3.592982 283.845614 3.592982h190.42807c19.761404 0 35.929825 16.168421 35.929825 35.929825s-16.168421 35.929825-35.929825 35.929825H283.845614C167.073684 73.65614 75.452632 168.870175 75.452632 285.642105v454.512281c0 116.77193 93.417544 210.189474 210.189473 210.189474h454.512281c116.77193 0 210.189474-93.417544 210.189474-210.189474V547.929825c0-19.761404 16.168421-35.929825 35.929824-35.929825s35.929825 16.168421 35.929825 35.929825v190.42807c-1.796491 156.294737-129.347368 283.845614-282.049123 283.845614z" fill="#2D3234" p-id="2346"></path><path d="M803.031579 186.835088h-152.701754c-188.631579 0-341.333333 154.498246-341.333334 341.333333V736.561404c0-188.631579 154.498246-341.333333 341.333334-341.333334h152.701754V186.835088zM803.031579 465.291228V118.568421c0-21.557895 25.150877-32.336842 41.319298-16.168421l168.870176 168.870175c10.778947 10.778947 10.778947 30.540351 0 41.319299L844.350877 481.459649c-14.37193 14.37193-41.319298 3.592982-41.319298-16.168421z" fill="#2D3234" p-id="2347"></path>
    </svg>
    <svg t="1682077428427" class="icon" viewBox="0 0 1024 1024" version="1.1"
         xmlns="http://www.w3.org/2000/svg" p-id="2485" width="40" height="40"
         style="position: absolute; right: 110px; top: 95px">
      <path d="M60.8 1024c-33.6 0-60.8-27.2-60.8-60.8v-243.2c0-33.6 27.2-60.8 60.8-60.8s60.8 27.2 60.8 60.8v243.2c0 33.6-27.2 60.8-60.8 60.8zM361.6 1024c-33.6 0-60.8-27.2-60.8-60.8v-473.6c0-33.6 27.2-60.8 60.8-60.8s60.8 27.2 60.8 60.8v473.6c0 33.6-27.2 60.8-60.8 60.8zM662.4 1024c-33.6 0-60.8-27.2-60.8-60.8v-678.4c0-33.6 27.2-60.8 60.8-60.8s60.8 27.2 60.8 60.8v678.4c0 33.6-27.2 60.8-60.8 60.8zM963.2 1024c-33.6 0-60.8-27.2-60.8-60.8V60.8c0-33.6 27.2-60.8 60.8-60.8s60.8 27.2 60.8 60.8v902.4c0 33.6-27.2 60.8-60.8 60.8z" fill="#666666" p-id="2486"></path>
    </svg>
    <svg t="1682077540896" class="icon" viewBox="0 0 1024 1024" version="1.1"
         xmlns="http://www.w3.org/2000/svg" p-id="2624" width="50" height="50"
         style="position: absolute; right: 35px; top: 90px" @click="mySet()">
      <path d="M905.86 428.021h-0.002l-71.797-15.945c-5.594-17.868-12.887-34.998-21.324-51.473l38.849-64.668c14.509-23.2 21.803-57.282 0-79.129l-39.588-39.547c-10.662-10.708-24.994-15.206-39.461-15.206-14.985 0-30.151 4.895-41.465 12.759L668.1 214.924c-16.343-8.477-33.384-15.731-51.125-21.499l-16.121-72.621c-4.806-26.654-28.1-55.492-58.989-55.492h-55.932c-30.897 0-49.815 29.276-55.932 55.93l-17.963 71.746c-18.917 6.03-37.143 13.761-54.445 22.897l-64.538-41.075c-11.361-7.865-26.481-12.759-41.512-12.759-14.42 0-28.752 4.497-39.46 15.206l-39.543 39.547c-21.848 21.846-14.507 55.93 0 79.128l40.854 68.078c-7.644 15.469-14.461 31.374-19.705 48.064l-71.75 15.946c-26.654 4.812-55.495 28.099-55.495 58.995v55.93c0 30.889 29.277 49.813 55.932 55.93l72.665 18.13c5.029 15.428 11.273 30.237 18.4 44.569l-40.899 68.165c-14.508 23.157-21.807 57.24 0 79.087l39.588 39.548c10.663 10.704 24.994 15.248 39.455 15.248 14.991 0 30.151-4.894 41.471-12.758l64.672-41.249c17.432 9.217 35.744 17.041 54.795 23.071l17.917 71.573c6.118 26.653 25.035 55.931 55.932 55.931h55.933c30.89 0 54.184-28.84 58.989-55.493l16.122-72.838c17.565-5.685 34.433-12.853 50.559-21.194l63.1 40.199c11.313 7.866 26.481 12.76 41.465 12.76 14.467 0 28.8-4.546 39.461-15.248l39.588-39.548c21.803-21.847 14.509-55.93 0-79.089l-38.89-64.757c7.819-15.38 14.596-31.371 20.055-47.976l72.671-18.132c26.655-6.115 55.932-25.039 55.932-55.93v-55.93c-0.003-30.893-28.841-54.181-55.497-58.993zM514.684 648.029c-74.593 0-135.333-60.562-135.333-134.931s60.739-134.889 135.333-134.889c74.588 0 135.287 60.52 135.287 134.889s-60.699 134.931-135.287 134.931z" fill="#515151" p-id="2625"></path>
    </svg>
    <div id="bottom-row">
      <span style="font-size: 180%; position: absolute; left: 30px; top: 30px;">Student(Table)</span>
      <svg t="1682078654322" class="icon" viewBox="0 0 1024 1024" version="1.1"
           xmlns="http://www.w3.org/2000/svg" p-id="2763" width="60" height="60"
           style="position: absolute; right: 20px; top: 10px">
        <path d="M242.48 185.248C179.52 153.76 128 185.6 128 256v512c0 70.4 51.52 102.24 114.48 70.752l539.024-269.52c62.96-31.488 62.96-83.008 0-114.48L242.48 185.248z" fill="#231815" p-id="2764"></path>
      </svg>
      <el-table
          :data="tableData"
          style="position: absolute; left: 10px; top: 100px; height: auto; width: 770px"
          @sort-change="sortChange"
          @selection-change="handleSelectionChange"
      >
        <el-table-column type="selection" v-if="myShow"> </el-table-column>
        <el-table-column prop="id" sortable label="学号" width="auto" align="center"/>
        <el-table-column prop="name" label="姓名" width="auto" align="center"/>
        <el-table-column prop="submitState" sortable label="提交时间" width="auto"
                         :formatter="dateFormat1" align="center"/>
        <el-table-column prop="modifyState"
                         sortable="custom"
                         label="批改状态" width="auto" align="center">
          <template v-slot="scope">
            <el-image  style="width: 15px; height: 15px" :src="scope.row.modifyState.fileUrl"></el-image>
          </template>
        </el-table-column>
        <el-table-column prop="lastModifiedBy" label="上次修改者" width="auto" align="center"/>
        <el-table-column prop="lastTime"
                         label="上次修改时间" width="auto" :formatter="dateFormat2" align="center"/>
        <el-table-column prop="score" sortable label="分数" width="auto" align="center"/>
        <el-table-column label="查看附件" width="auto" align="center">
          <template v-slot="scope">
            <el-button type="primary" @click="check">批改</el-button>
          </template>
        </el-table-column>
      </el-table>
    </div>
  </div>
</template>

<style scoped>
a {
  color: black;
}
#left-col {
  margin: 50px 0 0 250px;
  border: 3px solid black;
  position: relative;
  overflow: auto;
  top: 0;
  left: 0;
  width: 250px;
  height: 600px;
}
#first-row {
  border-top: 3px solid black;
  border-right: 2px solid black;
  border-bottom: 3px solid black;
  border-left: 2px solid black;
  position: relative;
  overflow: auto;
  top: 80px;
  left: 0;
  width: 247px;
  height: 40px;
}
#second-row {
  border-top: 3px solid black;
  border-right: 2px solid black;
  border-bottom: 3px solid black;
  border-left: 2px solid black;
  position: relative;
  overflow: auto;
  top: 320px;
  left: 0;
  width: 247px;
  height: 40px;
}
#right-col {
  margin: 50px 0 0 0;
  border-top: 3px solid black;
  border-right: 3px solid black;
  border-bottom: 3px solid black;
  position: absolute;
  overflow: auto;
  top: 0;
  left: 503px;
  width: 800px;
  height: 600px;
}
#bottom-row {
  border-top: 3px solid black;
  position: relative;
  overflow: auto;
  top: 160px;
  left: 0;
  width: 800px;
  padding-top: 20px;
  height: 400px;
}
</style >

<script setup lang="ts">
import {reactive} from "vue";
import {router} from '@/router';

enum AssignmentState{
  notModified,
  modifying,
  finish
}

class UrlFile{
  fileUrl: string;
  assignState: AssignmentState;

  constructor(str: string, state: AssignmentState) {
    this.fileUrl = str;
    this.assignState = state;
  }

}
interface StudentContent {
  id: number,
  name: string,
  submitState: Date | null,
  modifyState: UrlFile,
  lastModifiedBy: string,
  lastTime: Date | null,
  score: number,

  //数据可视化
  //名字，release，ddl，延期时间，提交比，评分比，是否return，setting 三个时间支持排序，return排序，
}

const tableData: StudentContent[] = reactive([
  {
    id: 12010000,
    name: 'aaaa',
    submitState: new Date('2023-01-23 04:17:34'),
    modifyState: new UrlFile("src/assets/icon/error.png", AssignmentState.notModified),
    lastModifiedBy: "aaaa",
    lastTime: new Date('2023-01-28 04:17:34'),
    score: 0
  },
  {
    id: 12010001,
    name: 'aaaa',
    submitState: new Date('2023-01-24 04:17:34'),
    modifyState: new UrlFile("src/assets/icon/warning.png", AssignmentState.modifying),
    lastModifiedBy: "aasda",
    lastTime: new Date('2023-01-26 04:17:34'),
    score: 0
  },
  {
    id: 12010002,
    name: 'aaaa',
    submitState: new Date('2023-01-29 04:17:34'),
    modifyState: new UrlFile("src/assets/icon/error.png", AssignmentState.notModified),
    lastModifiedBy: "arra",
    lastTime: new Date('2023-01-29 04:17:34'),
    score: 0
  },
  {
    id: 12010003,
    name: 'aaaa',
    submitState: new Date('2023-01-20 04:17:34'),
    modifyState: new UrlFile("src/assets/icon/successful.png", AssignmentState.finish),
    lastModifiedBy: "aafdbkp",
    lastTime: new Date('2023-01-24 04:17:34'),
    score: 0
  },
])

const compare = (custom: {modifyState: UrlFile}, order: string) => {
  return function (obj1: StudentContent, obj2:StudentContent) {
    const value1 = obj1["modifyState"];
    const value2 = obj2["modifyState"];
    if (value1.assignState <= value2.assignState) {
      return order === 'ascending' ? -1 : 1
    } else {
      return order === 'ascending' ? 1 : -1
    }
  }
}

const sortChange = (custom: any) => {
  tableData.sort(compare(custom.prop, custom.order))
}

const mySet = () => {
  router.push('/Main/Set')
}

const goMain = () => {
  router.push('/Main')
}
</script>